<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="./style.css" rel="stylesheet">
	<script src="./script.js" type="module" defer></script>
</head>

<body x-data="app" x-init="getShippingOptions">
	<div class="antialiased text-gray-900 px-6">
		<div class="max-w-xl mx-auto divide-y md:max-w-4xl">
			<div class="py-12">
				<h2 class="text-2xl font-bold" x-text="titles.title"></h2>
				<div class="mt-8 max-w-md animate-pulse" x-show="isLoading">
					<div class="w-1/2 h-7 bg-gray-300 rounded mb-2"></div>
					<div class="w-1/3 h-6 bg-gray-300 rounded mb-2"></div>
					<div class="w-1/3 h-6 bg-gray-300 rounded mb-6"></div>
					<div class="w-1/2 h-7 bg-gray-300 rounded mb-2"></div>
					<div class="w-full h-8 bg-gray-300 rounded mb-6"></div>
					<div class="w-1/2 h-7 bg-gray-300 rounded mb-2"></div>
					<div class="w-full h-8 bg-gray-300 rounded mb-6"></div>
				</div>
				<div class="mt-8 max-w-md" x-show="isLoading == false">
					<div class="grid grid-cols-1 gap-6">
						<section class="grid gap-1" x-show="hasError == false">
							<span class="text-gray-700" x-text="titles.delivery_methods"></span>
							<template x-for="deliveryMethod in deliveryMethods"
								x-init="$watch('selectedDeliveryMethod', value => getPickupLocations(value))">
								<div class="flex items-center" x-id="['deliveryMethodOption']">
									<input type="radio" :id="$id('deliveryMethodOption')" :value="deliveryMethod.type"
										name="inputDeliveryMethod" x-model="selectedDeliveryMethod" />
									<label :for="$id('deliveryMethodOption')" class="pl-2"
										x-text="deliveryMethod.label"></label>
								</div>
							</template>
						</section>
						<section x-show="selectedDeliveryMethod == 'deliver'">
							<span class="text-gray-700" x-text="titles.delivery_days"></span>
							<select name="selectDeliveryDay"
								class="block w-full mt-1 rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"
								x-model="selectedDeliveryDay" x-on:change="updateDeliveryOptions($event)">
								<template x-for="(deliveryDay, i) in deliveryDays">
									<option :value="deliveryDay.date" x-text="deliveryDay.label" :selected="i === 0">
									</option>
								</template>
							</select>
						</section>
						<section class="grid gap-1" x-show="selectedDeliveryMethod == 'deliver'">
							<span class="text-gray-700" x-text="titles.delivery_options"></span>
							<template x-for="deliveryOption in deliveryOptions" :key="deliveryOption.identifier">
								<div class="flex flex-row items-center" x-id="['deliveryOptionOption']">
									<div class="basis-2/3">
										<input type="radio" :id="$id('deliveryOptionOption')"
											:value="deliveryOption.identifier" name="inputDeliveryOption"
											x-model="selectedDeliveryOption" />
										<div class="pl-2 align-middle inline-block w-4/5">
											<label :for="$id('deliveryOptionOption')" x-text="deliveryOption.label"
												class="inline-block"></label>
											<span x-text="deliveryOption.description" class="inline-block text-xs"
												x-show="selectedDeliveryOption == deliveryOption.identifier"></span>
										</div>
									</div>
									<div class="basis-1/6">
										<span x-text="deliveryOption.rate.label"></span>
									</div>
									<div class="basis-1/6">
										<span x-text="deliveryOption.carrier" class="pl-2 text-right"></span>
									</div>
								</div>
							</template>
						</section>
						<section class="grid gap-1" x-show="selectedDeliveryMethod == 'collect'">
							<span class="text-gray-700" x-text="titles.collect_options"></span>
							<div class="animate-pulse" x-show="isLoadingCollectOptions">
								<div class="w-full h-8 bg-gray-300 rounded mb-2"></div>
								<div class="w-1/2 h-8 bg-gray-300 rounded mb-2"></div>
								<div class="w-full h-8 bg-gray-300 rounded mb-2"></div>
								<div class="w-1/2 h-8 bg-gray-300 rounded mb-2"></div>
								<div class="w-full h-8 bg-gray-300 rounded mb-2"></div>
								<div class="w-1/2 h-8 bg-gray-300 rounded mb-2"></div>
								<div class="w-full h-8 bg-gray-300 rounded mb-2"></div>
							</div>
							<template x-for="collectOption in collectOptions">
								<div class="flex flex-row items-center" x-id="['collectOptionOption']">
									<div class="basis-2/3">
										<input type="radio" :id="$id('collectOptionOption')"
											:value="collectOption.code" name="inputCollectOption"
											x-model="selectedCollectOption" />
										<div class="pl-2 align-middle inline-block w-4/5">
											<label :for="$id('collectOptionOption')" x-text="collectOption.label"
												class="inline-block"></label>
											<span class="inline-block text-xs" x-text="collectOption.description"></span>
										</div>
									</div>
									<div class="basis-1/6">
										<span x-text="collectOption.rate.label"></span>
									</div>
									<div class="basis-1/6">
										<span class="pl-2 text-right" x-text="collectOption.carrier"></span>
									</div>
								</div>
							</template>
						</section>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>

</html>